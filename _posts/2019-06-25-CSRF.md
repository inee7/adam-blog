---
layout: post
title: CSRF
img: csrf.jepg
tags: 보안
---

CSRF 공격(Cross Site Request Forgery)은 웹 어플리케이션 취약점 중 하나로 인터넷 사용자(희생자)가 자신의 의지와는 무관하게 공격자가 의도한 행위(수정, 삭제, 등록 등)를 특정 웹사이트에 요청하게 만드는 공격



페북이나 인스타에 광고성 글이 나도 모르게 올라가는 경우 

서버를 해킹한건 아니고 권한만 가지고 사용자의 행위를 하는것인데 

위조 요청을 전송하는 서비스에 로그인 상태이고 해커가 만든 피싱 사이트에 접속하면 CSRF 공격이 가능하게 된다

자동로그인 해 놓고 피싱사이트에 접속하거나 정상사이트에서도 가능 



## CSRF 공격 방어 

쓰기/변경이 가능한 요청에 적용하지만 중요한 데이타면 조회도 방어해야된다. 

### Referrer 검증

Request의 referrer을 확인해서 domain(ex *.facebook.com)이 일치하는 지 검증 

### Security Tocken 사용 (A.K.A CSRF Token)

세션에 난수 값을 저장하고 요청마다 난수 값을 포함 시켜 전송. 

요청 받을 때마다 세션에 저장된 토큰 값과 요청 파라미터에 전달되는 토큰 값이 일치하는지 검증하는 방법. 

### Double Submit Cookie 검증

웹브라우저의 Same Origin 정책으로 인해 자바스크립트에서 타 도메인의 쿠키 값을 확인/수정하지 못한다는 것을 이용한 방어 기법



음.. 감이 잘 안온다... 더 이해가 될때 추가로 정리하겠다.. 



ref)https://itstory.tk/entry/CSRF-공격이란-그리고-CSRF-방어-방법