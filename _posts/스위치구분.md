# L2,L3,L4,L7 스위치 구분 


L2 ~ L7 스위치는 각각 해당 레이어에서 사용하는 정보(주소)를 컨트롤 하는 장비라고 볼 수 있다.



![img](https://t1.daumcdn.net/cfile/tistory/247DBC3E58D2893002)





**1. L2 스위치**

\- L2 스위치는 가장 흔하게 볼 수 있는 스위칭 방식으로 다른 방식의 스위치에 비해 가격이 저렴하다.

\- L2 주소는 MAC 주소를 뜻한다. 즉 L2 스위치의 역할은 MAC주소를 읽어 스위칭을 하고,  

이것을 어떤 포트로 보낼것인지 스위칭(컨트롤)하는 장비를 말한다.

- 스위치는 MAC 테이블을 가지고 있어서 이것을 기준으로 패킷을 해당 포트로 전달한다.
- 하지만 라우팅이 불가능 하며, 상위 레이어 프로토콜을 이용한 스위칭이 불가능하다.



**2. L3 스위치 (라우팅)**

- L3 스위치는 IP 또는 IPX 주소를 읽어서 스위칭을 한다.
- 네트워크상에 흘러가는 패킷이 들어오면 L3 스위치는 목적이 IP 주소를 보고 적절한 포트로 패킷을 전송(라우팅 한다.)

\- 즉 A라는 IP는 어느 방향으로 가고 B 는 IP는 어느 방향으로 가게하는 라우팅을 할 수 있다.





**3. L4 스위치**

\- L4 스위치는 TCP/UDP 프로토콜에서 스위칭을 수행하므로  TCP와 UDP의 포트를 보고 적절한 서버로 패킷을 전송한다.
\- 즉 L4 주소는 포트번호를 뜻하며 여기서 포트번호는 웹은 80, ftp는 20/21번, 텔넷은 23번 이런것을 뜻한다.
그리고 똑같은 IP에 대하여 포트번호가 다를 경우 다른 서버로 보낼수 있다.





![네트워크 스위치 비교 설명](https://t1.daumcdn.net/cfile/tistory/220AF23E58D2893101)





\- 위 그림과 같이


http://www.naver.com 패킷(TCP/80)은 1번 서버로 보내고
https://www.naver.com 패킷(TCP/443)은 2번 서버로 보내고
ftp www.naver.com 패킷(TCP/20,21)은 3번 서버로 보내고 할 수 있다.

\- 이런식으로 하나의 IP 이지만, L4주소(포트번호) 별로 따로 따로 분배하여 보낼수 있다.
\- 또한 L4 스위치는 로드밸런싱 기능이 지원된다. L4 장비의 VIP (Virtual IP)를 통해, 요청받은 작업을 여러개의 서버로 분산 시킬 수 있다.

\- 그리고 Failover 기능이 지원된다.

한 대의 서버가 VIP를 통해 서비스를 하다가, 어떤 이유로 서비스가 중단되면 자동으로 다른 서버가 같은 역할을 수행한다.





**4. L7 스위치**


\- L7은 어플리케이션 영역이다.

\- L7 스위치는 L4가 갖고 있는 문제점들을 해결하기 위해 패킷의 IP, 포트 정보 뿐만 아니라 패킷의 URL 정보, 쿠키, 플레이로드 정보등을

종합적으로 검사하여 사용자별로 연속적이고 차별하된 서비스를 제공할 수 있다.



\* L4 스위치의 문제점 : VolP나 P2P와 같은 어플리케이션에 대해 다양한 형태의 패킷 내용을 살펴보기 어렵고, 

사용자의 IP가 수시로 변경되는 경우 해당 사용자에 대한 연속적인 서비스를 제공하기 어렵다.



L7 주소로 URL을 예로 들어보자.





![L2 , L3 , L4 , L7 스위치 구분 및 기본적인 설명](https://t1.daumcdn.net/cfile/tistory/2674063E58D2893225)





\- 예를 들어서


www.naver.com/blog 는 1번 서버로 보내고
www.naver.com/cafe 는 2번 서버로 보내고
www.naver.com/book 는 3번 서버로 보내고 할 수 있다.


\- L7 스위치는 L4 스위차가 갖고 있는 기능들을 모두 수용하면서, 불필요한 트래픽에 대한 차단이나 네트워크에 대한 공격을 완화시켜 준다.





\- 높은 레이어 스위치가 가격이 비싸고, 각각의 스위치는 자기보다 낮은 레이어 스위치 기능까지 다 할 수 있다.
즉, L7 스위치가 L4, L3, L2 기능을 다 할 수 있다.

출처: 

https://klero.tistory.com/entry/L2-L3-L4-L7-스위치-구분-및-기본적인-설명

 [Klero]