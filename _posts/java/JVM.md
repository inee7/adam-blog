# JVM



## jdk, jre, jvm 계층

- jdk ( jre ( api ( jvm ) ) ) )



## 자! 이제 JVM에 대해서

java 컴파일러가 java를 jvm이 읽을수 있는 언어로 컴파일 

중간언어(바이트코드)를 jvm이 인터프린터 하여 실행

JAVA 파일이 컴파일 되면 JVM에 의해 필요한 클래스만 실행됨

메모리 관리는 JVM이 아니라 OS가 한다.

JVM는 OS한테 받은 메모리를 활용한다.



### JVM의 메모리 구조

메소드(메소드의 바이트코드,static변수) - 스택(지역변수,매개변수) - 힙(인스턴스)

cf) OS메모리구조

​    코드-데이터-스택-힙



#### 메소드 영역 

- 메소드영역이 메모리 영역에 저장되는 시점이 바로 클래스가 메모리에 올려지는 시점이다.

- 즉, 메소드 영역은 클래스 정보를 처음 메모리 공간에 올릴 때 초기화 되는 대상을 저장하기 위한 메모리 공간

- 메소드의 바이트코드는 프로그램의 흐름을 구성하는 바이트코드! 사실상 컴파일 된 바이트코드의 대부분이기 때문에 전체 바이트코드라고 봐도 무방

- static 메소드도 당연히 올라간다 메소드의 바이트코드라고 했으니깐.

 

#### 힙영역

힙영역에서 성능에 미치지 않도록 별도의 알고리즘을 통해 가비지 컬렉션이 수행된다.

 

Object 클래스에 finalize메소드는 인스턴스가 소멸되기 직전에 JVM에 의해 자동 호출되는 메소드이다. 

~~그러나 완벽한 메소드 호출을 위해 System.gc(); System.runFinalization();을 해줘야 된다 ->하지만 가비지컬렉션이 안 될 수도 있다.~~ 